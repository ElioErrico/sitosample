<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Elio &amp; Marti - Il nostro giorno speciale. Informazioni sul matrimonio, viaggio di nozze e galleria fotografica." />
  <meta name="keywords" content="Matrimonio, Elio, Marti, Viaggio di nozze, IBAN, Cerimonia" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elio &amp; Marti - 2 Cuori e 1 Capanna</title>
  
  <!-- Collegamento Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Collegamento al file CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Navbar fissa in alto -->
  <nav class="main-nav">
    <ul>
      <li>
        <a href="#benvenuto">
          <!-- Benvenuto -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
        </a>
      </li>
      <li>
        <a href="#info-generali">
          <!-- Informazioni -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
          </svg>
        </a>
      </li>
      <li>
        <a href="#viaggio-nozze">
          <!-- Viaggio di nozze -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m20.893 13.393-1.135-1.135a2.252 2.252 0 0 1-.421-.585l-1.08-2.16a.414.414 0 0 0-.663-.107.827.827 0 0 1-.812.21l-1.273-.363a.89.89 0 0 0-.738 1.595l.587.39c.59.395.674 1.23.172 1.732l-.2.2c-.212.212-.33.498-.33.796v.41c0 .409-.11.809-.32 1.158l-1.315 2.191a2.11 2.11 0 0 1-1.81 1.025 1.055 1.055 0 0 1-1.055-1.055v-1.172c0-.92-.56-1.747-1.414-2.089l-.655-.261a2.25 2.25 0 0 1-1.383-2.46l.007-.042a2.25 2.25 0 0 1 .29-.787l.09-.15a2.25 2.25 0 0 1 2.37-1.048l1.178.236a1.125 1.125 0 0 0 1.302-.795l.208-.73a1.125 1.125 0 0 0-.578-1.315l-.665-.332-.091.091a2.25 2.25 0 0 1-1.591.659h-.18c-.249 0-.487.1-.662.274a.931.931 0 0 1-1.458-1.137l1.411-2.353a2.25 2.25 0 0 0 .286-.76m11.928 9.869A9 9 0 0 0 8.965 3.525m11.928 9.868A9 9 0 1 1 8.965 3.525" />
          </svg>
        </a>
      </li>
      <li>
        <a href="#regalo">
          <!-- Regalo -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
          </svg>
        </a>
      </li>
      <li>
        <a href="#galleria">
          <!-- Galleria -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
          </svg>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Sezione di Benvenuto -->
  <section id="benvenuto" class="section section-benvenuto">
    <div class="content fade-in">
      <h1 class="title">Elio &amp; Marti</h1>
      <h2 class="subtitle">Due cuori e Una Capanna</h2>
      <p class="date">Sabato 5 Luglio 2025, ore 17:00</p>
      <p class="location">Castelletto San Giovanni, Zibido San Giacomo, MI</p>
      <div class="hero-image">
        <img src="images/1.jpg" alt="Foto di apertura" />
      </div>
    </div>
  </section>

  <!-- Sezione Informazioni Generali -->
  <section id="info-generali" class="section section-info">
    <div class="content fade-in">
      <h2>Informazioni Generali</h2>
      <p>
        Siamo felicissimi di invitarvi al nostro matrimonio.  
        Di seguito troverete tutte le informazioni utili per raggiungere la cerimonia e festeggiare con noi.
      </p>
      <h3>Quando</h3>
      <p>Sabato 5 Luglio 2025, ore 17:00</p>
      <h3>Indirizzo</h3>
      <p>Castelletto San Giovanni</p>
      <p>Via Giacomo Matteotti, 24, Zibido San Giacomo, MI</p>
      <div class="info-images">
        <img src="images/2.jpg" alt="Foto informativa 1">
        <img src="images/3.jpg" alt="Foto informativa 2">
      </div>
      <div class="logistica">
        <h3>Indicazioni Stradali / Mappa</h3>
        <div class="map-container">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d11130.572345935105!2d9.10921655981036!3d45.368516901673985!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4786dd67bad83787%3A0xa35824d35db400da!2sCastelletto%20San%20Giovanni%20-%20Event%20Location%20Milano!5e0!3m2!1sit!2sit!4v1674747441598!5m2!1sit!2sit" 
            width="100%" 
            height="350" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Sezione Descrizione del Viaggio di Nozze -->
  <section id="viaggio-nozze" class="section section-viaggio">
    <div class="content fade-in">
      <h2>Il Nostro Viaggio di Nozze</h2>
      <p>
        Per la nostra luna di miele abbiamo scelto l'Australia del Nord, tra paesaggi selvaggi e natura incontaminata.  
        Non vediamo l'ora di condividere con voi ogni dettaglio di questa fantastica avventura!
      </p>
      <div class="viaggio-images">
        <img src="images/5.jpg" alt="Foto Viaggio 1">
        <img src="images/6.jpg" alt="Foto Viaggio 2">
      </div>
    </div>
  </section>

  <!-- Sezione Regalo - IBAN -->
  <section id="regalo" class="section section-regalo">
    <div class="content fade-in">
      <h2>Regalo di Nozze</h2>
      <p>Se volete contribuire al nostro viaggio di nozze, potete farlo tramite bonifico:</p>
      <p class="iban"><strong>INTESTATARIO:</strong> Elio Errico</p>
      <p class="iban"><strong>IBAN:</strong> IT70M0306967684511787298003</p>
      <p>Grazie di cuore a tutti!</p>
      <p class="icon-heart">&#9829;</p>
    </div>
  </section>

  <!-- Sezione Galleria Fotografica -->
  <section id="galleria" class="section section-galleria">
    <div class="content fade-in">
      <h2>Galleria Fotografica</h2>
      <div class="gallery-grid">
        <img src="images/7.jpg" alt="Foto Galleria 1">
        <img src="images/8.jpg" alt="Foto Galleria 2">
        <img src="images/9.jpg" alt="Foto Galleria 3">
        <img src="images/10.jpg" alt="Foto Galleria 4">
        <img src="images/12.jpg" alt="Foto Galleria 6">
        <img src="images/14.jpg" alt="Foto Galleria 8">
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="main-footer">
    <p>&copy; 2025 Elio &amp; Marti - Tutti i diritti riservati</p>
  </footer>

  <!-- Modal per l'ingrandimento dell'immagine -->
  <div id="imageModal" class="modal">
    <!-- Pulsante exit in alto a destra -->
    <span class="modal-close" title="Chiudi">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
      </svg>
    </span>
    <!-- Pulsante zoom in basso a sinistra -->
    <span class="modal-zoom" title="Ingrandisci">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
        <path fill-rule="evenodd" d="M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
      </svg>
    </span>
    <img class="modal-content" id="modalImage" alt="Immagine ingrandita" />
  </div>

  <!-- JavaScript per fade-in, gestione modal e zoom -->
  <script>
    // Effetto fade-in
    const faders = document.querySelectorAll('.fade-in');
    const options = { threshold: 0.2 };
    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('appear');
        observer.unobserve(entry.target);
      });
    }, options);
    faders.forEach(fader => observer.observe(fader));

    // Gestione Modal
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const modalClose = document.querySelector('.modal-close');
    const modalZoom = document.querySelector('.modal-zoom');

    // // Funzione per aprire la modal
    // function openModal(e) {
    //   modal.style.display = "flex";  // attiva il flex per centrare il contenuto
    //   if(this.tagName.toLowerCase() === "img") {
    //     modalImg.src = this.src;
    //   } else {
    //     // Se l'evento parte dal container, recupera l'immagine interna
    //     modalImg.src = this.querySelector('img').src;
    //   }
    //   // Rimuove eventuale stato zoom
    //   modalImg.classList.remove('zoomed');
    //   e.preventDefault();
    // }
    function openModal(e) {
      modal.style.display = "flex";  // attiva il flex per centrare il contenuto
      document.body.style.overflow = "hidden"; // disabilita lo scrolling della pagina
      if(this.tagName.toLowerCase() === "img") {
        modalImg.src = this.src;
      } else {
        // Se l'evento parte dal container, recupera l'immagine interna
        modalImg.src = this.querySelector('img').src;
      }
      // Rimuove eventuale stato zoom
      modalImg.classList.remove('zoomed');
      e.preventDefault();
    }
    // Aggiunge il bottone zoom su ogni immagine della home page e imposta l'apertura della modal con DOPPIO CLICK sul container
    // oppure con un SINGOLO CLICK sul bottone zoom
    document.addEventListener('DOMContentLoaded', function() {
      const images = document.querySelectorAll('.hero-image img, .info-images img, .viaggio-images img, .gallery-grid img');
      images.forEach(img => {
        if (!img.parentElement.classList.contains('img-container')) {
          // Avvolge l'immagine in un container
          const wrapper = document.createElement('div');
          wrapper.classList.add('img-container');
          img.parentNode.insertBefore(wrapper, img);
          wrapper.appendChild(img);

          // Crea il bottone zoom
          const zoomBtn = document.createElement('div');
          zoomBtn.classList.add('zoom-btn');
          zoomBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
  <path fill-rule="evenodd" d="M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
</svg>`;
          wrapper.appendChild(zoomBtn);

          // Apertura della modal: 
          // - il container risponde a DOPPIO CLICK
          wrapper.addEventListener('dblclick', openModal);
          // - il bottone zoom risponde a SINGOLO CLICK
          zoomBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            openModal.call(img, e);
          });
        }
      });
    });
    // Chiusura modal (SINGOLO CLICK sul tasto exit)
    modalClose.addEventListener('click', function(e) {
      modal.style.display = "none";
      document.body.style.overflow = "";
      // Se usi anche una classe 'zoomed', la rimuovi:
      modalImg.classList.remove('zoomed');
      resetModalImage();
      e.preventDefault();
    });
    
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        modal.style.display = "none";
        document.body.style.overflow = "";
        modalImg.classList.remove('zoomed');
        resetModalImage();
      }
    });




    // Gestione zoom in modal:
    modalZoom.addEventListener('click', function(e) {
      e.stopPropagation();
      modalImg.classList.toggle('zoomed');
      modal.classList.toggle('zoom-active');  // Aggiunge o rimuove la classe per lo scroll corretto
      e.preventDefault();
    });

    // L'immagine in modal risponde a doppio click per lo zoom:
    modalImg.addEventListener('dblclick', function(e) {
      e.stopPropagation();
      modalImg.classList.toggle('zoomed');
      modal.classList.toggle('zoom-active');  // Aggiunge o rimuove la classe per lo scroll corretto
      e.preventDefault();
    });
  // Variabili globali per lo zoom e il panning
  let scale = 1;         // Scala attuale
  let lastScale = 1;     // Scala al momento dell'inizio del pinch
  let posX = 0, posY = 0; // Traslazione corrente
  let lastX = 0, lastY = 0; // Variabili per il panning (dentro touchmove)
  let startDist = 0;     // Distanza iniziale tra i due touch
  let isPinching = false;
  let isDragging = false;
  // Variabile per memorizzare il punto (in coordinate immagine) in cui si è iniziato il pinch
  let initialPinch = { x: 0, y: 0 };
  
  /**
   * Calcola la distanza fra due touch.
   */
  function getDistance(touch1, touch2) {
    const dx = touch2.clientX - touch1.clientX;
    const dy = touch2.clientY - touch1.clientY;
    return Math.hypot(dx, dy);
  }
  
  /**
   * (Opzionale) Funzione di elasticità per il panning.
   * Se si vuole applicare un overscroll “a molla” quando si supera il limite, si può usare elasticClamp.
   */
  function elasticClamp(value, min, max) {
    const elasticity = 0.3;
    if (value < min) {
      return min + (value - min) * elasticity;
    } else if (value > max) {
      return max + (value - max) * elasticity;
    }
    return value;
  }
  
  /**
   * Aggiorna la trasformazione CSS dell'immagine.
   * Se si desidera applicare un clamping (o elastic clamping) per evitare che l’immagine venga spostata troppo oltre, 
   * si possono calcolare i limiti in base alle dimensioni effettive dell’immagine e del container.
   */
  function updateTransform() {
    // Calcola le dimensioni effettive dell'immagine dopo lo scaling
    const effectiveWidth = modalImg.naturalWidth * scale;
    const effectiveHeight = modalImg.naturalHeight * scale;
    
    // Dimensioni del container (modal)
    const containerWidth = modal.clientWidth;
    const containerHeight = modal.clientHeight;
    
    // Calcola i limiti massimi di traslazione (per evitare che si mostri "spazio vuoto")
    const maxTranslateX = Math.max((effectiveWidth - containerWidth) / 2, 0);
    const maxTranslateY = Math.max((effectiveHeight - containerHeight) / 2, 0);
    
    // Applica elasticClamp (se si vuole effetto overscroll)
    const elasticX = elasticClamp(posX, -maxTranslateX, maxTranslateX);
    const elasticY = elasticClamp(posY, -maxTranslateY, maxTranslateY);
    
    modalImg.style.transform = `translate(${elasticX}px, ${elasticY}px) scale(${scale})`;
  }
  
  /**
   * Gestione degli eventi touch per pinch‑zoom e panning.
   */
  modalImg.addEventListener('touchstart', function(e) {
    if (e.touches.length === 2) {
      // Inizio del pinch‑zoom
      isPinching = true;
      startDist = getDistance(e.touches[0], e.touches[1]);
      lastScale = scale;
      
      // Ottieni le coordinate del container (modal) – supponendo che modal sia full screen
      const modalRect = modal.getBoundingClientRect();
      // Calcola il punto medio tra le dita, in coordinate relative al modal
      const centerX = ((e.touches[0].clientX + e.touches[1].clientX) / 2) - modalRect.left;
      const centerY = ((e.touches[0].clientY + e.touches[1].clientY) / 2) - modalRect.top;
      
      // Calcola il punto in coordinate immagine (dato che transform-origin è 0 0)
      // Considerando che attualmente la trasformazione è: translate(posX, posY) scale(scale)
      // La posizione del punto nell'immagine è: (center - translation) / scale
      initialPinch = {
        x: (centerX - posX) / scale,
        y: (centerY - posY) / scale
      };
    } else if (e.touches.length === 1 && scale > 1) {
      // Inizio del panning con un dito, se l’immagine è ingrandita
      isDragging = true;
      lastX = e.touches[0].clientX - posX;
      lastY = e.touches[0].clientY - posY;
    }
  });
  
  modalImg.addEventListener('touchmove', function(e) {
    if (isPinching && e.touches.length === 2) {
      const currentDist = getDistance(e.touches[0], e.touches[1]);
      let newScale = lastScale * (currentDist / startDist);
      if (newScale < 1) newScale = 1;
      scale = newScale;
      
      // Ottieni di nuovo le coordinate relative al modal
      const modalRect = modal.getBoundingClientRect();
      const centerXNew = ((e.touches[0].clientX + e.touches[1].clientX) / 2) - modalRect.left;
      const centerYNew = ((e.touches[0].clientY + e.touches[1].clientY) / 2) - modalRect.top;
      
      // Aggiorna posX e posY in modo che il punto (initialPinch) rimanga sotto il punto medio delle dita
      posX = centerXNew - (initialPinch.x * scale);
      posY = centerYNew - (initialPinch.y * scale);
      
      updateTransform();
      e.preventDefault();  // Previene lo zoom nativo del browser
    } else if (isDragging && e.touches.length === 1) {
      // Panning con un dito (quando l'immagine è già ingrandita)
      posX = e.touches[0].clientX - lastX;
      posY = e.touches[0].clientY - lastY;
      updateTransform();
      e.preventDefault();
    }
  });
  
  modalImg.addEventListener('touchend', function(e) {
    if (e.touches.length < 2) {
      isPinching = false;
    }
    if (e.touches.length === 0) {
      isDragging = false;
    }
  });
  
  /**
   * Resetta lo stato dell'immagine (da chiamare alla chiusura della modal).
   */
  function resetModalImage() {
    scale = 1;
    lastScale = 1;
    posX = 0;
    posY = 0;
    modalImg.style.transform = 'none';
  }
  
  // Assicurati di integrare il reset anche quando la modal si chiude:
  modalClose.addEventListener('click', function(e) {
    modal.style.display = "none";
    document.body.style.overflow = "";
    modalImg.classList.remove('zoomed'); // Se usi anche questa classe
    resetModalImage();
    e.preventDefault();
  });
  
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      modal.style.display = "none";
      document.body.style.overflow = "";
      modalImg.classList.remove('zoomed');
      resetModalImage();
    }
  });




  </script>
</body>
</html>

